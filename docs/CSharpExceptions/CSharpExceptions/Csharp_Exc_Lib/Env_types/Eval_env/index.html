<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Eval_env (CSharpExceptions.Csharp_Exc_Lib.Env_types.Eval_env)</title><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.3.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">CSharpExceptions</a> &#x00BB; <a href="../../index.html">Csharp_Exc_Lib</a> &#x00BB; <a href="../index.html">Env_types</a> &#x00BB; Eval_env</nav><header class="odoc-preamble"><h1>Module <code><span>Env_types.Eval_env</span></code></h1><p>A module containing types used during interpretation.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-iconst"><a href="#type-iconst" class="anchor"></a><code><span><span class="keyword">type</span> iconst</span><span> = </span></code><ol><li id="type-iconst.Null_v" class="def variant constructor anchored"><a href="#type-iconst.Null_v" class="anchor"></a><code><span>| </span><span><span class="constructor">Null_v</span></span></code></li><li id="type-iconst.String_v" class="def variant constructor anchored"><a href="#type-iconst.String_v" class="anchor"></a><code><span>| </span><span><span class="constructor">String_v</span> <span class="keyword">of</span> string</span></code></li><li id="type-iconst.Int_v" class="def variant constructor anchored"><a href="#type-iconst.Int_v" class="anchor"></a><code><span>| </span><span><span class="constructor">Int_v</span> <span class="keyword">of</span> int</span></code></li><li id="type-iconst.Char_v" class="def variant constructor anchored"><a href="#type-iconst.Char_v" class="anchor"></a><code><span>| </span><span><span class="constructor">Char_v</span> <span class="keyword">of</span> char</span></code></li><li id="type-iconst.Bool_v" class="def variant constructor anchored"><a href="#type-iconst.Bool_v" class="anchor"></a><code><span>| </span><span><span class="constructor">Bool_v</span> <span class="keyword">of</span> bool</span></code></li><li id="type-iconst.Instance_v" class="def variant constructor anchored"><a href="#type-iconst.Instance_v" class="anchor"></a><code><span>| </span><span><span class="constructor">Instance_v</span> <span class="keyword">of</span> <a href="../../Common_types/index.html#type-address">Common_types.address</a></span></code></li></ol></div><div class="spec-doc"><p>Values assigned during interpretation.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_iconst"><a href="#val-pp_iconst" class="anchor"></a><code><span><span class="keyword">val</span> pp_iconst : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-iconst">iconst</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show_iconst"><a href="#val-show_iconst" class="anchor"></a><code><span><span class="keyword">val</span> show_iconst : <span><a href="#type-iconst">iconst</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-equal_iconst"><a href="#val-equal_iconst" class="anchor"></a><code><span><span class="keyword">val</span> equal_iconst : <span><a href="#type-iconst">iconst</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-iconst">iconst</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-val_to_iconst"><a href="#val-val_to_iconst" class="anchor"></a><code><span><span class="keyword">val</span> val_to_iconst : <span><a href="../../Ast/index.html#type-value_">Ast.value_</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-iconst">iconst</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_inst"><a href="#val-to_inst" class="anchor"></a><code><span><span class="keyword">val</span> to_inst : <span><a href="../../Common_types/index.html#type-address">Common_types.address</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-iconst">iconst</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-instructions"><a href="#type-instructions" class="anchor"></a><code><span><span class="keyword">type</span> instructions</span><span> = </span></code><ol><li id="type-instructions.IMethod" class="def variant constructor anchored"><a href="#type-instructions.IMethod" class="anchor"></a><code><span>| </span><span><span class="constructor">IMethod</span> <span class="keyword">of</span> <a href="../../Ast/index.html#type-method_sign">Ast.method_sign</a> * <a href="../../Ast/index.html#type-statement">Ast.statement</a></span></code></li><li id="type-instructions.IConstructor" class="def variant constructor anchored"><a href="#type-instructions.IConstructor" class="anchor"></a><code><span>| </span><span><span class="constructor">IConstructor</span> <span class="keyword">of</span> <a href="../../Ast/index.html#type-constructor_sign">Ast.constructor_sign</a> * <a href="../../Ast/index.html#type-statement">Ast.statement</a></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_instructions"><a href="#val-pp_instructions" class="anchor"></a><code><span><span class="keyword">val</span> pp_instructions : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-instructions">instructions</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show_instructions"><a href="#val-show_instructions" class="anchor"></a><code><span><span class="keyword">val</span> show_instructions : <span><a href="#type-instructions">instructions</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_meth"><a href="#val-to_meth" class="anchor"></a><code><span><span class="keyword">val</span> to_meth : <span><a href="../../Ast/index.html#type-method_sign">Ast.method_sign</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Ast/index.html#type-statement">Ast.statement</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-instructions">instructions</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_cons"><a href="#val-to_cons" class="anchor"></a><code><span><span class="keyword">val</span> to_cons : <span><a href="../../Ast/index.html#type-constructor_sign">Ast.constructor_sign</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Ast/index.html#type-statement">Ast.statement</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-instructions">instructions</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t_env_eval_const"><a href="#type-t_env_eval_const" class="anchor"></a><code><span><span class="keyword">type</span> t_env_eval_const</span><span> = </span></code><ol><li id="type-t_env_eval_const.Init" class="def variant constructor anchored"><a href="#type-t_env_eval_const.Init" class="anchor"></a><code><span>| </span><span><span class="constructor">Init</span> <span class="keyword">of</span> <a href="#type-iconst">iconst</a></span></code></li><li id="type-t_env_eval_const.Not_init" class="def variant constructor anchored"><a href="#type-t_env_eval_const.Not_init" class="anchor"></a><code><span>| </span><span><span class="constructor">Not_init</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_t_env_eval_const"><a href="#val-pp_t_env_eval_const" class="anchor"></a><code><span><span class="keyword">val</span> pp_t_env_eval_const : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t_env_eval_const">t_env_eval_const</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show_t_env_eval_const"><a href="#val-show_t_env_eval_const" class="anchor"></a><code><span><span class="keyword">val</span> show_t_env_eval_const : <span><a href="#type-t_env_eval_const">t_env_eval_const</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_init"><a href="#val-to_init" class="anchor"></a><code><span><span class="keyword">val</span> to_init : <span><a href="#type-iconst">iconst</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t_env_eval_const">t_env_eval_const</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_not_init"><a href="#val-to_not_init" class="anchor"></a><code><span><span class="keyword">val</span> to_not_init : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t_env_eval_const">t_env_eval_const</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t_env_value"><a href="#type-t_env_value" class="anchor"></a><code><span><span class="keyword">type</span> t_env_value</span><span> = </span></code><ol><li id="type-t_env_value.IConst" class="def variant constructor anchored"><a href="#type-t_env_value.IConst" class="anchor"></a><code><span>| </span><span><span class="constructor">IConst</span> <span class="keyword">of</span> <a href="#type-t_env_eval_const">t_env_eval_const</a></span></code></li><li id="type-t_env_value.ICode" class="def variant constructor anchored"><a href="#type-t_env_value.ICode" class="anchor"></a><code><span>| </span><span><span class="constructor">ICode</span> <span class="keyword">of</span> <a href="#type-instructions">instructions</a></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_t_env_value"><a href="#val-pp_t_env_value" class="anchor"></a><code><span><span class="keyword">val</span> pp_t_env_value : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t_env_value">t_env_value</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show_t_env_value"><a href="#val-show_t_env_value" class="anchor"></a><code><span><span class="keyword">val</span> show_t_env_value : <span><a href="#type-t_env_value">t_env_value</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_const"><a href="#val-to_const" class="anchor"></a><code><span><span class="keyword">val</span> to_const : <span><a href="#type-t_env_eval_const">t_env_eval_const</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t_env_value">t_env_value</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_code"><a href="#val-to_code" class="anchor"></a><code><span><span class="keyword">val</span> to_code : <span><a href="#type-instructions">instructions</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t_env_value">t_env_value</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create_val"><a href="#val-create_val" class="anchor"></a><code><span><span class="keyword">val</span> create_val : <span><a href="#type-iconst">iconst</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t_env_value">t_env_value</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create_inst"><a href="#val-create_inst" class="anchor"></a><code><span><span class="keyword">val</span> create_inst : <span><a href="../../Common_types/index.html#type-address">Common_types.address</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t_env_value">t_env_value</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t_loc_env"><a href="#type-t_loc_env" class="anchor"></a><code><span><span class="keyword">type</span> t_loc_env</span><span> =
  <a href="../../Common_types/index.html#type-address">Common_types.address</a> * <span><span><a href="#type-t_env_value">t_env_value</a> <a href="../../Common_types/Ident_Map/index.html#type-t">Common_types.Ident_Map.t</a></span> list</span></span></code></div><div class="spec-doc"><p>Describes the local interpretation scope.</p><p><code>address</code> -- The address of the instance from which the interpreted method is called. This allows you to access instance internal and public fields. The <code>address</code> changes when a new method is called.</p><p><code>t_env_value Ident_Map.t list</code> -- Contains a list of maps.</p><p>Each map consists of key-value elements, where the value is an <code>Ast.ident</code> and the value is an element of <code>iconst</code>.</p><p>By starting to interpret a new scope, a new map is created and added to the top of the list. After leaving the current scope, the top map in the list is removed.</p><p>New <code>Ast.ident</code> that appear during interpretation are added to the first map from the list of maps. Existing <code>Ast.ident</code>s are updated by overwriting the map into which the <code>Ast.ident</code> was initially added. The position of the map in the list is preserved.</p><p>Dynamically changes depending on the scope. The new scope is any <code>{}</code>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t_global_env"><a href="#type-t_global_env" class="anchor"></a><code><span><span class="keyword">type</span> t_global_env</span><span> = <a href="../../Common_types/index.html#type-text">Common_types.text</a></span></code></div><div class="spec-doc"><p>Contains an ast in the form of a key-value, where the value is a description of the class, and the key of <code>Common_types.code_ctx</code>).</p><p>Not updated during interpretation phase.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-mem_els"><a href="#type-mem_els" class="anchor"></a><code><span><span class="keyword">type</span> mem_els</span><span> =
  <a href="../../Common_types/index.html#type-code_ident">Common_types.code_ident</a>
  * <span><span>(<a href="#type-t_env_value">t_env_value</a> * <a href="../../Ast/index.html#type-fild_sign">Ast.fild_sign</a>)</span> <a href="../../Common_types/Ident_Map/index.html#type-t">Common_types.Ident_Map.t</a></span></span></code></div><div class="spec-doc"><p>Describes the fields of an instance.</p><p><code>Common_types.code_ident</code> -- The name of the class from which the instance is created.</p><p><code>(t_env_value * Ast.fild_sign) Common_types.Ident_Map.t</code> -- A map where the key is the field <code>Ast.ident</code>, and the value is the field value along with its signature.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-memory"><a href="#type-memory" class="anchor"></a><code><span><span class="keyword">type</span> memory</span><span> = <a href="../../Common_types/index.html#type-address">Common_types.address</a> * <span><a href="#type-mem_els">mem_els</a> <a href="../../Common_types/Mem_Map/index.html#type-t">Common_types.Mem_Map.t</a></span></span></code></div><div class="spec-doc"><p>Emulates memory within which new instances are created.</p><p><code>address</code> -- Next available address.</p><p><code>mem_els Mem_Map.t</code> -- A map consisting of key-value pairs, where the key is the address of an instance, and the value is the element of <code>mem_els</code>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-interpret_ctx"><a href="#type-interpret_ctx" class="anchor"></a><code><span><span class="keyword">type</span> interpret_ctx</span><span> =
  <a href="#type-t_global_env">t_global_env</a> * <a href="#type-t_loc_env">t_loc_env</a> * <a href="#type-memory">memory</a> * <a href="../../Common_types/index.html#type-sys_memory">Common_types.sys_memory</a></span></code></div><div class="spec-doc"><p><code>interpret_ctx</code> -- Is the state of a running program.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-sig_"><a href="#type-sig_" class="anchor"></a><code><span><span class="keyword">type</span> <span>('b, 'sys_err) sig_</span></span><span> = </span></code><ol><li id="type-sig_.Return" class="def variant constructor anchored"><a href="#type-sig_.Return" class="anchor"></a><code><span>| </span><span><span class="constructor">Return</span> <span class="keyword">of</span> <span><span class="type-var">'b</span> option</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Sent after processing the <code>return</code>. Contains the return value.</p><span class="comment-delim">*)</span></div></li><li id="type-sig_.Exn" class="def variant constructor anchored"><a href="#type-sig_.Exn" class="anchor"></a><code><span>| </span><span><span class="constructor">Exn</span> <span class="keyword">of</span> <a href="../../Common_types/index.html#type-address">Common_types.address</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Sent after processing the <code>throw</code>. Contains the address of the instance of the thrown exception.</p><span class="comment-delim">*)</span></div></li><li id="type-sig_.Break" class="def variant constructor anchored"><a href="#type-sig_.Break" class="anchor"></a><code><span>| </span><span><span class="constructor">Break</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Sent after processing the <code>break</code>.</p><span class="comment-delim">*)</span></div></li><li id="type-sig_.Error" class="def variant constructor anchored"><a href="#type-sig_.Error" class="anchor"></a><code><span>| </span><span><span class="constructor">Error</span> <span class="keyword">of</span> <span class="type-var">'sys_err</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Is a system error. Almost never stops.</p><span class="comment-delim">*)</span></div></li></ol></div><div class="spec-doc"><p>Runtime signals</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-eval_t"><a href="#type-eval_t" class="anchor"></a><code><span><span class="keyword">type</span> <span>('a, 'b, 'sys_err) eval_t</span></span><span> = </span></code><ol><li id="type-eval_t.Eval_res" class="def variant constructor anchored"><a href="#type-eval_t.Eval_res" class="anchor"></a><code><span>| </span><span><span class="constructor">Eval_res</span> <span class="keyword">of</span> <span class="type-var">'a</span></span></code></li><li id="type-eval_t.Signal" class="def variant constructor anchored"><a href="#type-eval_t.Signal" class="anchor"></a><code><span>| </span><span><span class="constructor">Signal</span> <span class="keyword">of</span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'sys_err</span>)</span> <a href="#type-sig_">sig_</a></span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_sig"><a href="#val-to_sig" class="anchor"></a><code><span><span class="keyword">val</span> to_sig : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="#type-sig_">sig_</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'c</span>, <span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="#type-eval_t">eval_t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-nsig"><a href="#val-nsig" class="anchor"></a><code><span><span class="keyword">val</span> nsig : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>, <span class="type-var">'c</span>)</span> <a href="#type-eval_t">eval_t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rsig"><a href="#val-rsig" class="anchor"></a><code><span><span class="keyword">val</span> rsig : <span><span><span class="type-var">'a</span> option</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'a</span>, <span class="type-var">'c</span>)</span> <a href="#type-eval_t">eval_t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bsig"><a href="#val-bsig" class="anchor"></a><code><span><span class="keyword">val</span> bsig : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>, <span class="type-var">'c</span>)</span> <a href="#type-eval_t">eval_t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-esig"><a href="#val-esig" class="anchor"></a><code><span><span class="keyword">val</span> esig : <span><a href="../../Common_types/index.html#type-address">Common_types.address</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>, <span class="type-var">'c</span>)</span> <a href="#type-eval_t">eval_t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-error"><a href="#val-error" class="anchor"></a><code><span><span class="keyword">val</span> error : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'c</span>, <span class="type-var">'a</span>)</span> <a href="#type-eval_t">eval_t</a></span></span></code></div></div></div></body></html>
